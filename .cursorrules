# AI Copilot Instructions for nextjs-app

> **CRITICAL**: 
> 1. **READ FIRST**: Before implementing any changes, read the relevant instruction files from `.github/instructions/` folder.
> 2. **ALWAYS** use the existing `useTheme` hook and theme constants.
> 3. **COMMENT** every HTML block and function as per the rules below.

## ‚ö†Ô∏è Auto-Resolve Warnings Instruction

**When you see file-not-found warnings:**
1. **Stop and analyze** ‚Äî Check the error paths in the Problems panel
2. **Auto-resolve** ‚Äî Run: `bun run lint` to identify breaking references
3. **Fix immediately** ‚Äî Update relative paths to point to `.github/instructions/[file].md`
4. **Verify** ‚Äî Confirm all warnings clear before proceeding
5. **Rule**: Instruction file references should use format: `instructions/01-project-context.md` (example) ‚Äî plain text only, no markdown links

## üó£Ô∏è Communication & Reporting Rules

**Every time you amend code, you MUST provides a summary:**
- **Format**: 
  ```text
  [AMEND] file_path.tsx
  Lines: 10-25
  Action: Added generic tooltip wrapper
  ```
- **Summarize what you did, the specific file, and row numbers.**
- **If creating a new hook/utility**: Explicitly mention "Rationale: Created reusable key [Name] to avoid duplication."

## üìù Code Commenting Rules (MANDATORY)

**You MUST add comments to:**
1.  **Every Function**: Explain intent, parameters, and return value.
2.  **Every HTML Block**: Explain the section's purpose (e.g., `<!-- Main Dashboard Grid -->`).
3.  **Complex Logic**: Explain *why*, not just *what*.

**Example:**
```tsx
/**
 * Fetches user data and transforms for chart display.
 * @param userId - The ID of the current user
 * @returns Formatted chart data object
 */
async function getUserChartData(userId: string) {
  // Check cache first to reduce API load
  const cached = await getCache(userId);
  
  return (
    // Main Container for Chart
    <div className="p-4">
      {/* Header Section */}
      <Header />
      {/* Chart Visualization */}
      <Chart />
    </div>
  )
}
```

## üß© Hooks & Utilities (PRIORITY)

1.  **Reuse First**: ALWAYS check `app/hooks/` and `lib/utils.ts` (or specific lib files) before writing new logic.
2.  **Proactive Creation**: If you see code that could be reused (e.g. data formatting, specific event listeners), **ASK the user**: "Should I create a custom hook for this Logic?"
3.  **Utilities**: Keep `lib/` organized. Do not dump everything into `utils.ts`.

## üé® System & Theme Context

**This app features a comprehensive Dynamic Theme System.**
**Location**: `app/hooks/useTheme.ts` & `lib/constants/themes.ts`

**You MUST use `useTheme()` for accessing:**
- **Theme**: `vercel` | `neo-brutalism`
- **Color**: `neutral`, `amber`, `blue`, `cyan`, `emerald`, `fuchsia`, `green`, `indigo`, `lime`, `orange`, `pink`
- **Style**: `vega`, `nova`, `maia`, `lyra`, `mira` (Presets for radius/spacing/shadows)
- **Radius**: `none`, `sm`, `md`, `lg`
- **Fonts**: `sans`, `serif`, `mono` overrides
- **Mode**: Light / Dark

**Usage Rule**:
- NEVER hardcode hex colors (except in `themes.ts` definitions).
- ALWAYS use CSS variables: `bg-primary`, `text-accent`, `var(--radius)`.
- **Chart Colors**: Use `useEffect` to sync `localStorage` color with Recharts.

## Architecture & Data Flow

### Core Stack
- **Framework**: Next.js 16 (App Router) with Server Components by default
- **Language**: TypeScript (strict mode, no `any` unless unavoidable)
- **Styling**: Tailwind CSS v4 + CSS variables (theme system in `app/themes/`)
- **UI Library**: shadcn/ui (Radix UI primitives + Tailwind, copy-paste only)

### Page Structure
```
app/
‚îú‚îÄ‚îÄ (root pages)     ‚Üí Navbar visible
‚îî‚îÄ‚îÄ dashboard/       ‚Üí Sidebar + nested layout
    ‚îú‚îÄ‚îÄ layout.tsx   ‚Üí SidebarProvider + AppSidebar wrapper
    ‚îú‚îÄ‚îÄ page.tsx     ‚Üí Dashboard home
    ‚îî‚îÄ‚îÄ [section]/   ‚Üí sales, marketing, users, etc.
        ‚îî‚îÄ‚îÄ page.tsx
```

**Key**: Dashboard pages are wrapped in a sidebar layout with `h-svh` height management and `overflow-auto` scrolling at the innermost content div.

## Critical Patterns & Rules

### 1. **Component Decision Tree** (READ BEFORE IMPLEMENTING UI)
1. **Is it in shadcn/ui?** ‚Üí Use existing component from `components/ui/`
   - Check `instructions/11-shadcn-components.md` for list
2. **Not in shadcn?** ‚Üí ASK USER before creating custom component
3. **Use custom?** ‚Üí Create in `components/custom/[ComponentName].tsx` (PascalCase)
4. **Section-specific?** ‚Üí Add to `app/[section]/components/` (PascalCase)
5. **Page-specific?** ‚Üí Add to `app/[section]/[page]/components/` or same folder (PascalCase)

**Do NOT**: Add custom code to `components/ui/` ‚Äî shadcn only.

### 2. **Naming Conventions**
- **shadcn components**: lowercase (`button.tsx`, `card.tsx`)
- **Custom components**: PascalCase (`Header.tsx`, `AdminStats.tsx`)
- **Folders**: lowercase-with-hyphens (`user-profile/`, `sales-reports/`)
- **Dynamic routes**: brackets (`[id]/`, `[slug]/`)
- **Hooks**: `use` prefix (`useTheme`, `useMobile`)
- **All files**: `.tsx` (not `.ts` for components)

### 3. **Styling Guidelines**
- **Utility-first**: Use Tailwind classes; avoid custom CSS unless global/required
- **Layout utilities**: `layout-container`, `layout-padding` for consistent spacing
- **Dark mode**: Use `dark:` variants; theme defines both light and dark via CSS variables
- **Grouping classes**: layout ‚Üí spacing ‚Üí typography ‚Üí color ‚Üí effects

**Theme Color Integration (CRITICAL)**:
- **Always use CSS variables for theme colors**: `bg-primary/10`, `text-primary`, `border-primary`
- **Common CSS variable patterns**:
  - Backgrounds: `bg-primary`, `bg-primary/10`, `bg-primary/20`
  - Text: `text-primary`, `text-secondary`, `text-muted-foreground`
  - Borders: `border-primary`, `border-border`
  - Icons: `text-primary`, `text-destructive`, `text-warning`
- **Never use inline hex values**: `style={{ color: '#EC4899' }}` ‚ùå
- **Why**: CSS variables (`--primary`, `--accent`) auto-update when theme changes
- **IMPORTANT**: For every new page/component implementation, ensure all theme colors use CSS variables

**Dashboard layout pattern**:
```tsx
<div className="layout-container mx-auto w-full h-svh bg-sidebar">
  <SidebarProvider className="w-full h-full bg-sidebar p-3">
    <AppSidebar />
    <SidebarInset className="h-full flex-1 flex flex-col pr-px bg-sidebar">
      <div className="h-full rounded-xl border border-border bg-background overflow-y-auto">
        {children}
      </div>
    </SidebarInset>
  </SidebarProvider>
</div>
```
Key: `bg-sidebar` at every container level; `overflow-y-auto` on innermost div; `h-svh` (screen height) + `h-full` nesting.

### 4. **TypeScript Standards**
- **Strict mode enabled**: No implicit `any`; use `unknown` + type narrowing if needed
- **Avoid type assertions**: Prefer proper typing; use `as` only when necessary
- **Export prop types**: Export interfaces for component props (e.g., `ButtonProps`)
- **Comments**: Add brief comments to new/edited code explaining intent
- **Keep types near code**: Define types in same file or nearby folder

### 5. **Server vs Client Components**
- **Server Components by default** (faster, smaller JS bundles)
- **Client Components only when needed**: Hooks (`useState`, `useEffect`, `useTheme`), event handlers, real-time updates
- **Mark with `'use client'`** at top of file

## Questions?
If uncertain about patterns, component placement, or architectural decisions, refer to the `.github/instructions/` folder first. It contains comprehensive, maintainable standards that guide all code changes.
