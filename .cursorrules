# AI Copilot Instructions for nextjs-app

> **CRITICAL**: 
> 1. **READ FIRST**: Before implementing any changes, read the relevant instruction files from `.github/instructions/` folder.
> 2. **ALWAYS** use the existing `useTheme` hook and theme constants.
> 3. **COMMENT** every HTML block and function as per the rules below.

## ‚ö†Ô∏è Auto-Resolve Warnings Instruction

**When you see file-not-found warnings:**
1. **Stop and analyze** ‚Äî Check the error paths in the Problems panel
2. **Auto-resolve** ‚Äî Run: `bun run lint` to identify breaking references
3. **Fix immediately** ‚Äî Update relative paths to point to `.github/instructions/[file].md`
4. **Verify** ‚Äî Confirm all warnings clear before proceeding
5. **Rule**: Instruction file references should use format: `instructions/01-project-overview.md` (example) ‚Äî plain text only, no markdown links

## üó£Ô∏è Communication & Reporting Rules

**Every time you amend code, you MUST provides a summary:**
- **Format**: 
  ```text
  [AMEND] file_path.tsx
  Lines: 10-25
  Action: Added generic tooltip wrapper
  ```
- **Summarize what you did, the specific file, and row numbers.**
- **If creating a new hook/utility**: Explicitly mention "Rationale: Created reusable key [Name] to avoid duplication."

## üìù Code Commenting Rules (MANDATORY)

**You MUST add comments to:**
1.  **Every Function**: Explain intent, parameters, and return value.
2.  **Every HTML Block**: Explain the section's purpose (e.g., `<!-- Main Dashboard Grid -->`).
3.  **Complex Logic**: Explain *why*, not just *what*.

**Example:**
```tsx
/**
 * Fetches user data and transforms for chart display.
 * @param userId - The ID of the current user
 * @returns Formatted chart data object
 */
async function getUserChartData(userId: string) {
  // Check cache first to reduce API load
  const cached = await getCache(userId);
  
  return (
    // Main Container for Chart
    <div className="p-4">
      {/* Header Section */}
      <Header />
      {/* Chart Visualization */}
      <Chart />
    </div>
  )
}
```

## üß© Hooks & Utilities (PRIORITY)

1.  **Reuse First**: ALWAYS check `app/hooks/` and `lib/utils.ts` (or specific lib files) before writing new logic.
2.  **Proactive Creation**: If you see code that could be reused (e.g. data formatting, specific event listeners), **ASK the user**: "Should I create a custom hook for this Logic?"
3.  **Utilities**: Keep `lib/` organized. Do not dump everything into `utils.ts`.

## üé® System & Theme Context

**This app features a comprehensive Dynamic Theme System.**
**Location**: `app/hooks/useTheme.ts` & `lib/constants/themes.ts`

**You MUST use `useTheme()` for accessing:**
- **Theme**: `vercel` | `neo-brutalism`
- **Color**: `neutral`, `amber`, `blue`, `cyan`, `emerald`, `fuchsia`, `green`, `indigo`, `lime`, `orange`, `pink`
- **Style**: `vega`, `nova`, `maia`, `lyra`, `mira` (Presets for radius/spacing/shadows)
- **Radius**: `none`, `sm`, `md`, `lg`
- **Fonts**: `sans`, `serif`, `mono` overrides
- **Mode**: Light / Dark

**Usage Rule**:
- NEVER hardcode hex colors (except in `themes.ts` definitions).
- ALWAYS use CSS variables: `bg-primary`, `text-accent`, `var(--radius)`.
- **Chart Colors**: Use `useEffect` to sync `localStorage` color with Recharts.

## Architecture & Data Flow

### Core Stack
- **Framework**: Next.js 16 (App Router) with Server Components by default
- **Language**: TypeScript (strict mode)
- **Styling**: Tailwind CSS v4 + CSS variables
- **UI Library**: shadcn/ui

## Critical Patterns & Rules

### 1. **Component Decision Tree** (READ BEFORE IMPLEMENTING UI)
1. **Is it in shadcn/ui?** ‚Üí Use existing component from `components/ui/`
   - Check `instructions/05-components-and-hooks.md` for details.
2. **Not in shadcn?** ‚Üí ASK USER before creating custom component
3. **Use custom?** ‚Üí Create in `components/custom/[ComponentName].tsx` (PascalCase)

**Do NOT**: Add custom code to `components/ui/` ‚Äî shadcn only.

### 2. **Naming Conventions**
- **shadcn components**: lowercase (`button.tsx`, `card.tsx`)
- **Custom components**: PascalCase (`Header.tsx`, `AdminStats.tsx`)
- **Folders**: lowercase-with-hyphens (`user-profile/`, `sales-reports/`)
- **Dynamic routes**: brackets (`[id]/`, `[slug]/`)
- **Hooks**: `use` prefix (`useTheme`, `useMobile`)

### 3. **Styling Guidelines**
- **Utility-first**: Use Tailwind classes.
- **Dark mode**: Use `dark:` variants.
- **Theme Color Integration (CRITICAL)**: Always use CSS variables for theme colors (`bg-primary/10`, `text-primary`).

**Dashboard layout pattern**:
```tsx
<div className="layout-container mx-auto w-full h-svh bg-sidebar">
  <SidebarProvider className="w-full h-full bg-sidebar p-3">
    <AppSidebar />
    <SidebarInset className="h-full flex-1 flex flex-col pr-px bg-sidebar">
      <div className="h-full rounded-xl border border-border bg-background overflow-y-auto">
        {children}
      </div>
    </SidebarInset>
  </SidebarProvider>
</div>
```

### 4. **Server vs Client Components**
- **Server Components by default**
- **Client Components only when needed**: Hooks (`useState`, `useEffect`, `useTheme`)
- **Mark with `'use client'`** at top of file

## üìö Instruction Reference
Please refer to the `.github/instructions/` folder for details:
- **01-project-overview.md**: Architecture & Goals
- **02-app-structure.md**: Folders & Layouts
- **03-coding-standards.md**: TS, Linting, Docs
- **04-styling-and-theming.md**: Tailwind & Theme System
- **05-components-and-hooks.md**: shadcn/ui & Decisions
- **06-performance-and-best-practices.md**: A11y & Security

## üóÑÔ∏è Supabase Schema & Mockup Sync (MANDATORY)

**Rule: Always keep code and schema in sync.**
1. **Mockup Change**: Every time you add, rename, or modify a field in `lib/constants/dummy-data.ts` or any UI component.
2. **Schema Update**: You MUST immediately update the corresponding table definition and SQL in `supabase/schema.md`.
3. **Consistency**: Ensure the TypeScript interfaces in the app match the SQL column types and constraints defined in the schema documentation.
